#/-------------------[DOTENV_PUBLIC_KEY]--------------------/
#/            public-key encryption for .env files          /
#/       [how it works](https://dotenvx.com/encryption)     /
#/----------------------------------------------------------/
DOTENV_PUBLIC_KEY_CI="024bf365797c943e9cd9e3d0878c10aa52f524bdd6e282e9aae961b94f3ea7be7a"

# IsTheTubeRunning - CI Environment Configuration
#
# Selective Encryption (dotenvx):
#   - SECRET_* variables are encrypted (database URLs, API keys, etc.)
#   - Non-secret config remains plaintext (DEBUG=false, OTEL_ENABLED=true, etc.)
#   - Decrypts in CI using DOTENV_PRIVATE_KEY_CI secret
#
# To modify:
#   Secret values:     dotenvx set SECRET_DATABASE_URL "value" -f .env.ci
#                   OR edit directly (pre-commit hook auto-encrypts on commit)
#   Non-secret values: Edit directly in this file (stays plaintext)

# ============================================================================
# API Settings
# ============================================================================
API_V1_PREFIX="/api/v1"
PROJECT_NAME="IsTheTubeRunning"
DEBUG="true"
ALLOWED_ORIGINS="http://localhost:5173,http://localhost:3000"

# ============================================================================
# Database Settings (PostgreSQL)
# ============================================================================
SECRET_DATABASE_URL="encrypted:BNPDW0yQF6p+cYJx++PpAGApPDdOBMCiWKGgnxBKnWPojI7R/GwHP6ccnzyV/4Pdbqgg7A4SOgzn19LzbFMYna9y1DkWshFatV7O9/eGwVbDax80OcHvM/W+kO60D9jGcJv4IEv0vdkpoz5gNQoMcIDVrQXWuJ4ZoGq/1ATuuc06ZuuyM0EtWDy8a1iXf7RKfX5RDcwAWezrG5SA2C8Os92y3a5a"
DATABASE_ECHO="false"

# ============================================================================
# Redis Settings
# ============================================================================
SECRET_REDIS_URL="encrypted:BCG759vChhZEZmn2GvTC1du6kA91gUmX3eApWvZ37NQ2H1kzp7j0P2n64+Hv/+HpG09a04qC7Fad3wQn+zR48CnPOp42+L3jPxpVMLmcivX0MWXOBGSJficpMZtiyOStkrGtFHH1yui32i2eWA2SSxrTdHU4B5Yq/w=="

# ============================================================================
# Auth0 Settings (Phase 3)
# ============================================================================
# For DEBUG mode (local development), use test values:
AUTH0_DOMAIN="your-tenant.auth0.com"
AUTH0_API_AUDIENCE="https://your-api-audience"
AUTH0_ALGORITHMS="RS256"

# ============================================================================
# TfL API Settings (Phase 5)
# ============================================================================
# Get your API key from: https://api.tfl.gov.uk
SECRET_TFL_API_KEY="encrypted:BG82ZWWjAx9qQLMfp7IMBzOy/DUPT4c8mH5HXdlkFEUPF63SH3qLQZ0lwKEzu4UBulcZN0NmV6209EMI8f6bqehxs7gurDqrLQo+ipw5QpSfmf5NYw8htKUAC7ZAx/DsZBt6RKztuy1ky0RWO8DJGf3K9orRX6O3gZIymExbmwsQ"

# ============================================================================
# Email Settings (Phase 4)
# SMTP configuration for sending verification emails
# ============================================================================
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SECRET_SMTP_USER="encrypted:BFTQ2JFhEq1uhOtKE0CXg1Cqth02jEg0UC1agyJB94dewuFWwL4+FGec3Ab8fCCRc/OnFHgW9rvE5kmzb4iistLCkkS4tNT5rmSeVBinHNSSl3BozhESxQYrFwaEjjXM/3SB45EOt97Og5GoHdb4VEumnu/h"
SECRET_SMTP_PASSWORD="encrypted:BOO9BpmrzczaUezJaXaR5mgWKMxRDpVNzkqOc2B0CWJwIlGNIR0/G5eRI17NfDPPN+fQjN7gD3sgkt8nZPh+iRhSyhmvdiD/PCv3j5v0OEZOARmq/fWREYu+jHvJJ99QvxsUyKctdEyor2FrxdR8ttkq"
SECRET_SMTP_FROM_EMAIL="encrypted:BLAEF3FqfOtAeGAWQrrVP0bmNVatpKzxi2G4IRlAFr6bc7kLLA86fPpvQcDNsRzMcdCveCwydgkd1QKPS6aIZLmQStjy3S8qaV5Wu9a74j7sHAEKhgZvZMM5HjOtjGZjkTW5Ax9mbiJhXZSTZmzca2j9OhTOQC5AjSMtn94="

# ============================================================================
# Celery Settings (Phase 8)
# ============================================================================
SECRET_CELERY_BROKER_URL="encrypted:BLbzakOQA/KFQfa2Y1EPJJ8ZaSybAK8j1OwKFIZVrXqQabq3zp/JbnPN8c359d6T0p0pocKhQfjZbblZvF5+mkSAJPMr1TcQQXxjgKVoZ1bwH3R6b1TGrUXYw3+37pNQ+ybi+cMfMlJARyllTLzaSHdNAchbwkMq8g=="
SECRET_CELERY_RESULT_BACKEND="encrypted:BG1Mp+fUOrg2JKeL6cyK9JhLb0yj+4NttjI/4CUWcq3oHXrMBtuNDmjLOKoPGFVcfdAHR9RQifDKXgYSHf+TX8gGBOwJY1bPov+jbmkO0IoSnoepkxhvqfI+HYUve3RiF62CXZe1dGBhuyMz3F90WUzxvvjdkT+JaQ=="

# ============================================================================
# Alert Settings (Issue #309)
# ============================================================================
# Per-line cooldown in minutes to prevent spam from TfL API flickering
# If only the reason text changes (not severity/status), wait this long before re-alerting
ALERT_COOLDOWN_MINUTES=5

# ============================================================================
# PII Hashing Settings (Issue #311)
# ============================================================================
# Secret key for HMAC-SHA256 hashing of PII (emails/phones) in logs and telemetry
# Generate a strong random secret: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_PII_HASH=encrypted:BNqA2p4hFW7iqbDVlo+jVmSObZ0UW8yv0j1piVKx99+VCmkrbx3Mici2pRxitriVP99NmTmY0AOFrlSMY74nOeggm9cakj+vzGvt5kENq2og9kzl2TgBUq0i0zj/SJA5gaRoqC+kBgpAnNKhXppjLEWMSA+RXDdmCeC+BEzZKBR0pRyJDWFitYnlmVM=

# ============================================================================
# Frontend Settings
# ============================================================================
VITE_API_URL="http://localhost:8000"

# ============================================================================
# Production Settings (Phase 12)
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn

# Azure Blob Storage for backups
# AZURE_STORAGE_CONNECTION_STRING=your-connection-string
# AZURE_STORAGE_CONTAINER=backups

# ============================================================================
# OpenTelemetry Settings (Observability)
# ============================================================================
# Master switch for OpenTelemetry distributed tracing
OTEL_ENABLED="true"

# Service identification
# Default service name - can be overridden per component for service graph differentiation:
#   - FastAPI/Backend: isthetuberunning-api
#   - Celery Worker: isthetuberunning-worker
#   - Celery Beat: isthetuberunning-beat
OTEL_SERVICE_NAME="isthetuberunning-backend"
OTEL_ENVIRONMENT="ci"

# Grafana Cloud OTLP endpoints (get from Grafana Cloud dashboard)
# Separate endpoints for traces and logs
# Format: https://otlp-gateway-{region}.grafana.net/otlp/v1/{signal}
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="https://otlp-gateway-prod-gb-south-1.grafana.net/otlp/v1/traces"
# local collector
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="http://localhost:4318/v1/traces"

OTEL_EXPORTER_OTLP_LOGS_ENDPOINT="https://otlp-gateway-prod-gb-south-1.grafana.net/otlp/v1/logs"

# Grafana Cloud auth header (same for traces and logs)
# Format: Authorization=Basic <base64-encoded-credentials>
SECRET_OTEL_HEADERS="encrypted:BGTBMVvEeBvxKFDehAckRcgTVPDhvr6kOicedP/pAlhTKmkGmJcxoQHHcpLyuEoARjOHoPtQH2gbki0KekPe8SlQVirrBqcLr1UI27LNvIELYv1PfouY6gojtvdPCN4mpYnyemsPi3kj5brbWix6tFC8lCpn6DnuxwXxoCmzLUSGFWHwHIV3u/NFWdOnAFqFbvn0h4IbSevZZCF7Ok/gRwp/K2vajIEEVJy2KBn6Rw9ciynFgFox03p6qfV1F91KFfj2M18UFTSe96HJKr7RFrDSO7Q9AVzieyxEwOVK3LjFL3oOPaYNMzPnBCiV5+0PVGW30hgFrTkdNY1B3vHi1Z1QD5eNdNaQh8tOxHEZZxKKuF9+vtbU67JTigS21mOxRxG2PWKCt0+Aq8f1ytRi18HMCDumXncc9HJZr3J/e8Xx78P+KogIuYPM4YJFFqnf/zl26AB3CQJbxKxZNw=="

# Protocol format for OTLP exports
OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"

# Sampling configuration (1.0 = 100% sampling, 0.1 = 10% sampling)
OTEL_TRACES_SAMPLER="parentbased_always_on"
OTEL_TRACES_SAMPLER_ARG="1.0"

# Log level for OTLP log export
# Valid values: NOTSET (all logs), DEBUG, INFO, WARNING, ERROR, CRITICAL
# NOTSET exports all log levels to Grafana Cloud for maximum observability
OTEL_LOG_LEVEL="NOTSET"

# Exclude health check endpoints from tracing (comma-separated)
OTEL_EXCLUDED_URLS="/health,/ready,/metrics"
