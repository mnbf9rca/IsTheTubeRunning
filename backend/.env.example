# example@v1
# IsTheTubeRunning - Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# API Settings
# ============================================================================
API_V1_PREFIX=/api/v1
PROJECT_NAME=IsTheTubeRunning
DEBUG=false
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================================================
# Logging Settings
# ============================================================================
# Log level for application logging (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ============================================================================
# Database Settings (PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/isthetube
DATABASE_ECHO=false

# Test Database (optional - defaults to isthetube_test if not set)
# TEST_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/isthetube_test

# ============================================================================
# Redis Settings
# ============================================================================
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# Auth0 Settings (Phase 3)
# ============================================================================
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_API_AUDIENCE=https://your-api-audience
AUTH0_ALGORITHMS=RS256

# ============================================================================
# TfL API Settings (Phase 5)
# ============================================================================
# Get your API key from: https://api.tfl.gov.uk
TFL_API_KEY=your-tfl-api-key-here

# ============================================================================
# Email Settings (Phase 4)
# SMTP configuration for sending verification emails
# ============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@isthetuberunning.com
# TLS auto-detected: port 465=implicit TLS, port 587/25=STARTTLS
# Set to true to require STARTTLS upgrade (fails if not supported)
# SMTP_REQUIRE_TLS=false

# ============================================================================
# Celery Settings (Phase 8)
# ============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ============================================================================
# Frontend Settings
# ============================================================================
VITE_API_URL=http://localhost:8000

# ============================================================================
# OpenTelemetry Settings (Observability)
# ============================================================================
# Master switch for OpenTelemetry distributed tracing
OTEL_ENABLED=true

# Service identification
# Default service name - can be overridden per component for service graph differentiation:
#   - FastAPI/Backend: isthetuberunning-api
#   - Celery Worker: isthetuberunning-worker
#   - Celery Beat: isthetuberunning-beat
OTEL_SERVICE_NAME="isthetuberunning-backend"
OTEL_ENVIRONMENT="production"

# Grafana Cloud OTLP endpoint (get from Grafana Cloud dashboard)
# Format: https://otlp-gateway-{region}.grafana.net/otlp
OTEL_EXPORTER_OTLP_ENDPOINT="https://otlp-gateway-prod-us-central-0.grafana.net/otlp/v1/traces"

# Grafana Cloud auth header (get from Grafana Cloud dashboard)
# Format: Authorization=Basic <base64-encoded-credentials>
OTEL_EXPORTER_OTLP_HEADERS="Authorization=Basic <your-base64-credentials>"

# Protocol format for OTLP exports
OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"

# Sampling configuration (1.0 = 100% sampling, 0.1 = 10% sampling)
OTEL_TRACES_SAMPLER="parentbased_always_on"
OTEL_TRACES_SAMPLER_ARG=1.0

# Exclude health check endpoints from tracing (comma-separated)
OTEL_EXCLUDED_URLS="/health,/ready,/metrics"

# ============================================================================
# Production Settings (Phase 12)
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn

# Azure Blob Storage for backups
# AZURE_STORAGE_CONNECTION_STRING=your-connection-string
# AZURE_STORAGE_CONTAINER=backups
