#/-------------------[DOTENV_PUBLIC_KEY]--------------------/
#/            public-key encryption for .env files          /
#/       [how it works](https://dotenvx.com/encryption)     /
#/----------------------------------------------------------/
DOTENV_PUBLIC_KEY_PRODUCTION="0332e154c228f2b38184bb285d099380f6966795ab4f9797db2f209ed6da748394"

# IsTheTubeRunning - Production Environment Configuration
#
# Selective Encryption (dotenvx):
#   - SECRET_* variables are encrypted (database URLs, passwords, API keys, etc.)
#   - Non-secret config remains plaintext (DEBUG=false, OTEL_SERVICE_NAME, etc.)
#   - Decrypts in production using DOTENV_PRIVATE_KEY_PRODUCTION secret
#
# To modify:
#   Secret values:     dotenvx set SECRET_DATABASE_URL "value" -f .env.production
#                   OR edit directly (pre-commit hook auto-encrypts on commit)
#   Non-secret values: Edit directly in this file (stays plaintext)

# ============================================================================
# API Settings
# ============================================================================
API_V1_PREFIX=/api/v1
PROJECT_NAME=IsTheTubeRunning
DEBUG=false
ALLOWED_ORIGINS=https://isthetube.cynexia.com

# ============================================================================
# Database Settings (PostgreSQL)
# ============================================================================
SECRET_DATABASE_URL=encrypted:BEcO/tKy6aGg1up+rqlcbA9l6t7FBMCsiSFexEPgWUHodVeJRbfwlLRWiQG8QzbvjhWuxut7ueSZ7XX4BfOGRwjIbnYVkF4YCWvXAoRa5BSDeqJS6hp3dCl2OFEd+UdXMnE7h9pa8YGtjcPiuCL1oSOEPvOKtDj/LusAFGwEi5DMfwGK8Re2WN5qiMr8wt2IWVTr8Z0D40ues84bXzVgCW56byPbqgw1iJnYHruYjvovPgGXh2zq
DATABASE_ECHO=false

# Test Database (optional - defaults to isthetube_test if not set)
# TEST_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/isthetube_test

# ============================================================================
# Redis Settings
# ============================================================================
SECRET_REDIS_URL=encrypted:BHSGwMY44n22B0vzOFuhn6TAvQEor45uFB+nPlS8PLcvybTNw8hMROcfuOzCd93nPuCc7Vn2R4h5xiT08KOYaGWz1i8G2iQJYeK3a92c2J/SqquDIg6njnVe+/6XlA/YUKJqekhzB1GmSBrn9xRUAU8MoB/W

# ============================================================================
# Auth0 Settings (Phase 3)
# ============================================================================
AUTH0_DOMAIN=tfl-alerts.uk.auth0.com
AUTH0_API_AUDIENCE=https://isthetube.cynexia.com
AUTH0_ALGORITHMS=RS256

# ============================================================================
# TfL API Settings (Phase 5)
# ============================================================================
# Get your API key from: https://api.tfl.gov.uk
SECRET_TFL_API_KEY="encrypted:BOLCPDS6X4zHWnd7UICkUYzDnxWq7DZCvX0gd/brtWP4LkVLuUbuTonRIQKjldUBAfxs+weGhIg2pRqG9E930YWvD6AZe3cWtJ2jSyXkV4EYhmd0CEJnkMrh5ULTqIjf6eHsCi/AZSee3LfjZO7lg8CT+TdcN0GxuN1ShX7niiB5"

# ============================================================================
# Email Settings (Phase 4)
# SMTP configuration for sending verification emails
# ============================================================================
SMTP_HOST=smtp.fastmail.com
SMTP_PORT=587
SECRET_SMTP_USER=encrypted:BJHanFaEB3HyND48zcu+a9rHHjogaVEOpNA81P/ndEYCLhBJ2UOaauY9T3vT1BRFwaBPgXS5Mj7pTzuy6QcM9eCed6C+z6mgC+Seh9oYqVh5o1Qlcvnei8XviwiAi4frnqQ/Efkj6weY6H7MR3dqXKx8ImpsOw==
SECRET_SMTP_PASSWORD=encrypted:BF5pEmdeldIERsXWbN+ozA3L+hCbs/94EUHcUx3VhjbNY3dI8X/pqWNRvQiIdoA/+b0UqBYM+qMcobuqJYwVtxB4FAxWp0W/Xyv4DxX9jLl7STZErscvQskghqz8+p4lUIqt5jXBwmccQ6X2DfrhRBw=
SECRET_SMTP_FROM_EMAIL=encrypted:BIevfPzfQ2y0sxlDsze3okavQ6rt39kCLLNJU6ehRX8XtUFwjJsV6rVVBmx6Xemd5lB5ZgPrZDs1AvN9e0IViUQ45cL8PgE9nvI85ljSdzNd2u/y9rcp4/Eg27CkUgky26ncsqKiyA3esGW2ZHEGJ3rMg7kavQ==

# ============================================================================
# Celery Settings (Phase 8)
# ============================================================================
SECRET_CELERY_BROKER_URL=encrypted:BHciHoMgdcsdQpixVPjgXQcSGFmFBt0G2qgr/LqyZ1VTCGPZbYC5lwDiMK1/4TRYhZjRf7572vyUZQbBWuQJU2EqRMZFEuf4dYq3HhyzDMxMLjEuPIMRU+gJ9DU/kdkIVK2PfGzeX+8e76CGiitTEQyhyTtC
SECRET_CELERY_RESULT_BACKEND=encrypted:BNLZzel0kg3UHr0/M9bf+MfQvIHc40mWZWCeQX/hpTKQe7icK1xOb1ZgDbgx2GUkcN5F9206cRgH+ZuHHUUy4TFCsTCrdoHRiF5MA6P8uSEbVrNZ2DMP+S/4/LI4Ypq3+RIoejCJPcy4rfwmofqz4sj2HfRW

# ============================================================================
# Alert Settings (Issue #309)
# ============================================================================
# Per-line cooldown in minutes to prevent spam from TfL API flickering
# If only the reason text changes (not severity/status), wait this long before re-alerting
ALERT_COOLDOWN_MINUTES=5

# ============================================================================
# PII Hashing Settings (Issue #311)
# ============================================================================
# Secret key for HMAC-SHA256 hashing of PII (emails/phones) in logs and telemetry
# Generate a strong random secret: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_PII_HASH=encrypted:BFzzUCy7Z5rUl2IprhWCkPhm/+XrugPQLpHvWrD14ohPziKz642QHkTBl49dHRnU7oPYrti9XUuQo4eKCgPQMLBUOoiTQV46niabB302KhGcu7AsZgQSP4mX5jX31VA/Fe0kj0+DmK4Cm42LRffpaeCZf9u4TvUaYKoKfC0MRIUoKh27SMjgfFWiRqU=

# ============================================================================
# Frontend Settings
# ============================================================================
VITE_API_URL=https://isthetube.cynexia.com

# ============================================================================
# Production Settings (Phase 12)
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn

# Azure Blob Storage for backups
# AZURE_STORAGE_CONNECTION_STRING=your-connection-string
# AZURE_STORAGE_CONTAINER=backups


CLOUDFLARE_TUNNEL_TOKEN=eyJhIjoiZGE2MmM0MmFmYmY4MWU4Y2VmYTgxOTBiNGYzYmM0Y2EiLCJ0IjoiNmJjNDhhYWEtNGJkZC00MTJjLTkxODItNTY4ZjU2MmE1N2UwIiwicyI6Ik9HRmtOV000WXpRdFltUXhZeTAwTURBd0xXSTNOR1F0TkRVMU56QXpPVGt4WXpobCJ9

# ============================================================================
# OpenTelemetry Settings (Observability)
# ============================================================================
# Master switch for OpenTelemetry distributed tracing
OTEL_ENABLED=true


# Service identification
# Default service name - can be overridden per component for service graph differentiation:
#   - FastAPI/Backend: isthetuberunning-api
#   - Celery Worker: isthetuberunning-worker
#   - Celery Beat: isthetuberunning-beat
OTEL_SERVICE_NAME="isthetuberunning-backend"
OTEL_ENVIRONMENT="prod"

# Grafana Cloud OTLP endpoints (get from Grafana Cloud dashboard)
# Separate endpoints for traces and logs
# Format: https://otlp-gateway-{region}.grafana.net/otlp/v1/{signal}
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="https://otlp-gateway-prod-gb-south-1.grafana.net/otlp/v1/traces"
# local collector
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="http://localhost:4318/v1/traces"

OTEL_EXPORTER_OTLP_LOGS_ENDPOINT="https://otlp-gateway-prod-gb-south-1.grafana.net/otlp/v1/logs"

# Grafana Cloud auth header (same for traces and logs)
# Format: Authorization=Basic <base64-encoded-credentials>
SECRET_OTEL_HEADERS="encrypted:BNTeNzBSTmPZ4H51xCbUR+IYbM0BoXJ72D7v/zh1PYkkQRxT/khyNLb+hRBQFL/G+Ot8kgd+ESwSTCxSBoJ1RLau1yd6PrdGOIGpil+pCNDXToG4jWItz4CJw+Jgi2u5WBQXQ9sbBeeBLRw0SB36YfoFcs8elqC5rc4d53AmM5lhN1p18m6Zr3sOf/JJ8va3G7E9XB56VnJCenYa1GyeITXEFTIsnkwiqEMDEPi+vmEw7ZR12T5hcscLMTdV+UFixhHe1pefUMKG+ovlnu6v19aBPVzAWGY7/RCCQqr5RiBd9WyZs+8/fuMUR16qHK+XDnZajzReCfJxqj/QvmKrnccC84K/WlUE5FCSy4T1mmm2lToeIO1cCTcrKCjBnkjlzFTSfjy29tH5X9c39OSVVVdHKQrjYPhke4JLmk22i+2FjXELkqdFiRZoWJl9QlKvcaCoE4RycvtYK6FynORzhmxhPkIpH2WSePu6dYA="

# Protocol format for OTLP exports
OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"

# Sampling configuration (1.0 = 100% sampling, 0.1 = 10% sampling)
OTEL_TRACES_SAMPLER="parentbased_always_on"
OTEL_TRACES_SAMPLER_ARG=1.0

# Log level for OTLP log export
# Valid values: NOTSET (all logs), DEBUG, INFO, WARNING, ERROR, CRITICAL
# NOTSET exports all log levels to Grafana Cloud for maximum observability
OTEL_LOG_LEVEL="NOTSET"

# Exclude health check endpoints from tracing (comma-separated)
OTEL_EXCLUDED_URLS="/health,/ready,/metrics"
