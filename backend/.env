#/-------------------[DOTENV_PUBLIC_KEY]--------------------/
#/            public-key encryption for .env files          /
#/       [how it works](https://dotenvx.com/encryption)     /
#/----------------------------------------------------------/
DOTENV_PUBLIC_KEY="020deaccf58a435e57865dc1f11acc62e4b9a2842456eaf0dc773b59195d82fb5e"

# IsTheTubeRunning - Development Environment Configuration
#
# Selective Encryption (dotenvx):
#   - SECRET_* variables are encrypted (TFL API keys, passwords, etc.)
#   - Non-secret config remains plaintext (DEBUG, OTEL_ENABLED, etc.) for easy review
#
# To modify:
#   Secret values:     dotenvx set SECRET_DATABASE_URL "postgresql://..."
#                   OR edit directly (pre-commit hook auto-encrypts on commit)
#   Non-secret values: Edit directly in this file (stays plaintext)

# ============================================================================
# API Settings
# ============================================================================
API_V1_PREFIX=/api/v1
PROJECT_NAME=IsTheTubeRunning
DEBUG=false
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:5174,http://localhost:3000

# ============================================================================
# Database Settings (PostgreSQL)
# ============================================================================
SECRET_DATABASE_URL=encrypted:BEk3tPylmqcHLQz7GK/kR9QhdIeZ9lgMzLw/tdRn+DoPiEHwDTJwOaU1H+ge+lWdf+2y+7uV9RXdMcn01FUhsTHEHYn56YgZ1FXozf2JTk6K4GfCglmeNXf156VPTYxFSTmg8H2wyWjyGWjkFJ/pki+m2257aNeYzILEP09ADJPifwajZ5ErIYQWsMzV9jM16xmkea43kTnSwcUjolBqfg==
DATABASE_ECHO=false

# ============================================================================
# Redis Settings
# ============================================================================
SECRET_REDIS_URL=encrypted:BPgrUseJPJVPwwAFGFWi87cXIpdR7mZ5/j8Y6AV6MGu6AEB4RoDBSwTqei4zr0ozQVr0EOonAQ9uU+ok/202O9KlUVWjTy41gs7+ASKl6FZOLiQHuYb4caB6QFlAVSabhCvEyutVwgUIbe38rucJlHtq68g5G5Yaww==

# ============================================================================
# Auth0 Settings (Phase 3)
# ============================================================================
# For DEBUG mode (local development), use test values:
AUTH0_DOMAIN=tfl-alerts.uk.auth0.com
AUTH0_API_AUDIENCE=https://tfl-alert-api.cynexia.com
AUTH0_ALGORITHMS=RS256

# ============================================================================
# TfL API Settings (Phase 5)
# ============================================================================
# Get your API key from: https://api.tfl.gov.uk
SECRET_TFL_API_KEY="encrypted:BF1prHpVx0NPTOoYImmCOQGlvvs0YXu/Eh+N1y29ABTiQ1Mu3yO6LtAapzw87x45cCbFAYc+AZFg2/I6l+9AvsURRGHWuw2u9ITmJLHqdOL8D9TgFYg/eFLikah3rbEjDJu2vExSThRCitAg7cduF6/ngdryphVlsH833+5kNagx"

# ============================================================================
# Email Settings (Phase 4)
# SMTP configuration for sending verification emails
# ============================================================================
SMTP_HOST=smtp.fastmail.com
SMTP_PORT=587
SECRET_SMTP_USER=encrypted:BNBjSDsBOYefgXSEh2buh6g+e6/22l8VGGzdgL8NBG8JxLwXYizk6WLJB/Sz/Z7F7jVErUdz68GpIsS9JQL7XV5Tw19q/5w3w235yMFs//mcX38GpoSdJHFm+48KyQbgP8F7z3BRu8QtUgz89PnlfN93e2QtBA==
SECRET_SMTP_PASSWORD=encrypted:BEW6+639vzxOmg3ImZW0zhciy207PwIj6WzP3qnsPi3Lu44JDQKPgJyE4JMAEGURG0Rdlm76o2j8jLmY2NaMA/fXuKBuOukG9sMXpuyzCi8R/JcXW+8kPKt7sBd+sMG3Jkx3jcm3rMxCMtLN9tNw6OQ=
SECRET_SMTP_FROM_EMAIL=encrypted:BEAWjRJhLdv/ryV65LbLjy+MtbCpOfnd7AhSJGHhIxm9MkfKYDM75OsDe26T3jHyc1bh5+L9EDwZkwN4O6OSgE+16NIWizwRflqhPHJ0vItmXIJhMCgw1KbSrYTGdAY1drblwlmQPU6ewfKWcitT2P7tGt4Inw==

# ============================================================================
# Celery Settings (Phase 8)
# ============================================================================
SECRET_CELERY_BROKER_URL=encrypted:BMLm4gdnIihjY0TrwXzRcc+yDO7rJTwm0LLSzqR2aGXPg72+SgqEXKV5fvz6Jitjqo/i0RDP2SpWAH0MWto20A59whpEc+gELVLpOqa5GGMGhLF72fnZWlX/ecFaJgGE5/E9yQcOkfd9PSSoPIdNvMt98V3Oq7ubZQ==
SECRET_CELERY_RESULT_BACKEND=encrypted:BEeYRm4z+w4pDkdRxjW7//Dj790t8Iu4ihlH0Zc4xZw5wwrnA1UNol9Yjv0YztKFtCx3267boq+5ZT1My7T19+IZlqjricvkFnC+ur5J0woHB9thyKAiMioqEGuU7/3uO1mdXZioGLwYis/5VhOqTiPTBNYlcJI8Mg==

# ============================================================================
# Alert Settings (Issue #309)
# ============================================================================
# Per-line cooldown in minutes to prevent spam from TfL API flickering
# If only the reason text changes (not severity/status), wait this long before re-alerting
ALERT_COOLDOWN_MINUTES=5

# ============================================================================
# PII Hashing Settings (Issue #311)
# ============================================================================
# Secret key for HMAC-SHA256 hashing of PII (emails/phones) in logs and telemetry
# Generate a strong random secret: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_PII_HASH=encrypted:BBtWebEv0MNdJAYm6d8gKfTdXFR/rmfP+LF5/vOrb37x40eBl3Ex6CmtBI9cv+AYl7Gk6ZLtzOUPneqgkNOxJIc3zbiz9QgppGmZcNZYzUXeDLmGgsMuO2jKTnXJ9crISA/h66Tk/y67twJtYSXiTQMDAsZ7WGNK8Ixm2b41SlCTrypQ3RCOTFVZTwU=

# ============================================================================
# Frontend Settings
# ============================================================================
VITE_API_URL=http://localhost:8000

# ============================================================================
# Production Settings (Phase 12)
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn

# Azure Blob Storage for backups
# AZURE_STORAGE_CONNECTION_STRING=your-connection-string
# AZURE_STORAGE_CONTAINER=backups

# ============================================================================
# OpenTelemetry Settings (Observability)
# ============================================================================
# Master switch for OpenTelemetry distributed tracing
OTEL_ENABLED=true


# Service identification
# Default service name - can be overridden per component for service graph differentiation:
#   - FastAPI/Backend: isthetuberunning-api
#   - Celery Worker: isthetuberunning-worker
#   - Celery Beat: isthetuberunning-beat
OTEL_SERVICE_NAME="isthetuberunning-backend"
OTEL_ENVIRONMENT="dev"

# Grafana Cloud OTLP endpoints (get from Grafana Cloud dashboard)
# Separate endpoints for traces and logs
# Format: https://otlp-gateway-{region}.grafana.net/otlp/v1/{signal}
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="https://otlp-gateway-prod-gb-south-1.grafana.net/otlp/v1/traces"
# local collector
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT="http://localhost:4318/v1/traces"

OTEL_EXPORTER_OTLP_LOGS_ENDPOINT="https://otlp-gateway-prod-gb-south-1.grafana.net/otlp/v1/logs"

# Grafana Cloud auth header (same for traces and logs)
# Format: Authorization=Basic <base64-encoded-credentials>
SECRET_OTEL_HEADERS="encrypted:BJbH2+ywevcPbvn6rZem8LWp9DeI2fAjfkcmOqjlRTIwtE3CF2z7TZDjweSlV7FFMS/2ruV5wL1lTwun4bbbv6CnI3mNjMaYxEivEOgDgeEEXsspZRDgRqYWksLmfDd0/8ow07LEDOf+YAorM58W7yvj51AOZAgo8Je9nbGiYpjA/mtorpR65co6eDeAP3B3Aiq21OMSc2bHTv5MUiYsIYKVK9NNacknZTJC/m50e7pvAM2fQ4crAY6gh6SqWz7DCEnr8NmQN/ThkgmLbiCkp9gbD35qe1prwjffGxfuqbQlE47c1qY6iY144jVYy4Y/8dOc1gbrgtwIJAIxiLC4NmGe76umDynjVprIx6Auz/RIkRAl9M54W23OBGWAe2IpG+vE/DPNVdaxUeLGmFeyiKKNPFoggFDA5JUttdHZVm0Muy7sORzwUWap5ZL04y+kt1OqyGImAkdwVPIVBpJMyLPQf85g"

# Protocol format for OTLP exports
OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"

# Sampling configuration (1.0 = 100% sampling, 0.1 = 10% sampling)
OTEL_TRACES_SAMPLER="parentbased_always_on"
OTEL_TRACES_SAMPLER_ARG=1.0

# Log level for OTLP log export
# Valid values: NOTSET (all logs), DEBUG, INFO, WARNING, ERROR, CRITICAL
# NOTSET exports all log levels to Grafana Cloud for maximum observability
OTEL_LOG_LEVEL="NOTSET"

# Exclude health check endpoints from tracing (comma-separated)
OTEL_EXCLUDED_URLS="/health,/ready,/metrics"
